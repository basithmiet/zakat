<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Zakat Calculator</title>

<link href="https://fonts.googleapis.com/css2?family=Cairo:wght@300;400;600;700&display=swap" rel="stylesheet">
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

<style>
:root{
  --bg:#071e16;
  --card:#0f2b22;
  --accent:#d4af37;
  --text:#f8f4ea;
  --error:#ff6b6b;
}

*{box-sizing:border-box}

body{
  margin:0;
  font-family:'Cairo',sans-serif;
  background:var(--bg);
  color:var(--text);
}

.container{
  padding:20px;
  display:flex;
  justify-content:center;
}

.card{
  background:var(--card);
  max-width:1000px;
  width:100%;
  padding:25px;
  border-radius:16px;
  box-shadow:0 10px 30px rgba(0,0,0,.6);
}

h2{
  text-align:center;
  margin-bottom:5px;
}

.date{
  text-align:center;
  font-size:14px;
  opacity:.8;
  margin-bottom:20px;
}

.grid{
  display:grid;
  grid-template-columns:1fr;
  gap:15px;
}

@media(min-width:768px){
  .grid{grid-template-columns:1fr 1fr;}
}

label{font-size:14px;}

input{
  width:100%;
  padding:10px;
  border-radius:8px;
  border:1px solid rgba(255,255,255,.1);
  margin-top:5px;
  background:rgba(255,255,255,.05);
  color:var(--text);
}

.checkbox-group{
  margin-top:15px;
  display:flex;
  gap:20px;
}

/* Ensure checkboxes align vertically with their labels */
.checkbox-group label{display:inline-flex;align-items:center;gap:10px;font-weight:600}
.checkbox-group input[type="checkbox"]{width:16px;height:16px;margin:0}

button{
  padding:14px;
  border:none;
  border-radius:8px;
  background:var(--accent);
  color:#000;
  font-weight:bold;
  cursor:pointer;
  margin-top:20px;
}

.result{
  margin-top:20px;
  font-size:18px;
  text-align:center;
  font-weight:bold;
}

.footer{
  text-align:center;
  margin-top:30px;
  font-size:14px;
  opacity:.8;
}
</style>
</head>

<body>

<div class="container">
<div class="card">

<h2>Zakat Calculator</h2>
<div class="date" id="todayDate"></div>

<div class="grid">

<div>
<label>Cash (₹)</label>
<input type="text" id="cash">
</div>

<div>
<label>Bank Balance (₹)</label>
<input type="text" id="bank">
</div>

<div>
<label>Gold (grams)</label>
<input type="text" id="goldGrams">
</div>

<div>
<label>Silver (grams)</label>
<input type="text" id="silverGrams">
</div>

<div>
<label>Gold Price per gram (₹)</label>
<input type="text" id="goldPrice">
</div>

<div>
<label>Silver Price per gram (₹)</label>
<input type="text" id="silverPrice">
</div>

<div>
<label>Zakatable Investments (₹)</label>
<input type="text" id="investments">
</div>

<div>
<label>Business Stock Value (₹)</label>
<input type="text" id="business">
</div>

<div>
<label>Money Owed To You (₹)</label>
<input type="text" id="receivables">
</div>

<div>
<label>Retirement / EPF (Zakatable Portion) (₹)</label>
<input type="text" id="retirement">
</div>

<div>
<label>Debts Payable (₹)</label>
<input type="text" id="debts">
</div>

</div>

<div class="checkbox-group">
<label>
<input type="checkbox" id="hawlCheck">
1 Lunar Year Completed (Hawl)
</label>

<label>
<input type="checkbox" id="includeJewelry" checked>
Include Personal Gold Jewelry (Hanafi Opinion)
</label>
</div>

<button onclick="calculate()">Calculate Zakat</button>

<div class="result" id="result"></div>
<canvas id="chart"></canvas>

<div class="footer">Developed by Basith ❤️ Roshni</div>

</div>
</div>

<script>

document.getElementById("todayDate").innerText =
  new Date().toLocaleDateString();

let chart;

function getValidNumber(id){
  let value = document.getElementById(id).value.trim();
  let number = parseFloat(value);
  if(isNaN(number) || number < 0) return 0;
  return number;
}

function calculate(){

  const hawl = document.getElementById("hawlCheck").checked;
  if(!hawl){
    document.getElementById("result").innerHTML =
      "Zakat not yet due (1 lunar year not completed).";
    return;
  }

  let cash = getValidNumber("cash");
  let bank = getValidNumber("bank");
  let goldGrams = getValidNumber("goldGrams");
  let silverGrams = getValidNumber("silverGrams");
  let goldPrice = getValidNumber("goldPrice");
  let silverPrice = getValidNumber("silverPrice");
  let investments = getValidNumber("investments");
  let business = getValidNumber("business");
  let receivables = getValidNumber("receivables");
  let retirement = getValidNumber("retirement");
  let debts = getValidNumber("debts");

  const includeJewelry =
    document.getElementById("includeJewelry").checked;

  let goldValue = includeJewelry ? goldGrams * goldPrice : 0;
  let silverValue = silverGrams * silverPrice;

  let totalAssets =
    cash + bank + goldValue + silverValue +
    investments + business + receivables + retirement;

  let netWealth = totalAssets - debts;

  if(netWealth <= 0){
    document.getElementById("result").innerHTML =
      "No Zakat due (net wealth is zero or negative).";
    return;
  }

  if(silverPrice <= 0){
    document.getElementById("result").innerHTML =
      "Please enter silver price to calculate Nisab.";
    return;
  }

  const nisab = 612.36 * silverPrice;

  if(netWealth < nisab){
    document.getElementById("result").innerHTML =
      "Below Nisab. No Zakat due.<br>Nisab: ₹" +
      nisab.toFixed(2);
    renderChart(cash,bank,goldValue,silverValue,investments,business);
    return;
  }

  const zakat = netWealth * 0.025;

  document.getElementById("result").innerHTML =
    "Zakat Payable: ₹" +
    zakat.toFixed(2) +
    "<br>Nisab: ₹" + nisab.toFixed(2);

  renderChart(cash,bank,goldValue,silverValue,investments,business);
}

function renderChart(cash,bank,gold,silver,invest,business){
  if(chart) chart.destroy();

  chart = new Chart(document.getElementById("chart"),{
    type:"pie",
    data:{
      labels:["Cash","Bank","Gold","Silver","Investments","Business"],
      datasets:[{
        data:[cash,bank,gold,silver,invest,business]
      }]
    }
  });
}

</script>

</body>
</html>
